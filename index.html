<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link rel="icon" href="favicon.ico" type="image/x-icon" />
		<link href="css/style.css" rel="stylesheet" />
		<link
			href="https://fonts.googleapis.com/css2?family=Oswald:wght@200;300;400;500;600;700&display=swap"
			rel="stylesheet"
		/>
		<link
			href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&display=swap"
			rel="stylesheet"
		/>
		<link
			href="https://fonts.googleapis.com/css2?family=EB+Garamond:ital,wght@0,400;0,500;0,600;0,700;0,800;1,400;1,500;1,600;1,700;1,800&display=swap"
			rel="stylesheet"
		/>
		<!-- Load Stripe.js on your website. -->
		<script src="https://js.stripe.com/v3/"></script>
		<title>Big Maths</title>
	</head>

	<body>
		<header>
			<div class="logo">
				<h1 class="logo-title">BIG MATHS</h1>
				<p class="by-jb">by Joshua Barry</p>
			</div>
			<nav>
				<ul class="nav-links">
					<li><a href="#">Overview</a></li>
					<li><a href="#">Is this for me?</a></li>
					<li><a href="#">About the author</a></li>
				</ul>
			</nav>
			<a class="cta" href="#"><button>BUY NOW</button></a>
		</header>

		<div class="landing">
			<div class="landing-video">
				<video
					loop
					autoplay
					muted
					src="resources/img/background-video.mp4"
				></video>
			</div>
			<div class="landing-header">
				<h1>MATHS MADE SIMPLE</h1>
				<h4>A clear and concise undergraduate text for beginners</h4>
				<p class="under-title"><br />vol.1</p>
			</div>
		</div>

		<div class="wrapper">
			<div class="overview section">
				<div class="overview-left">
					<h2>BOOK OVERVIEW</h2>
					<p class="under-title">80 pages - 32 concepts - 12300 words</p>
					<p>
						This book is designed as revision/introduction to advanced methods
						used in undergraduate science degrees, primarily maths and physics.
						To make the most of this book, the reader should consult this text
						in chronological order because as we progress to the harder topics,
						formulas that have been addressed previously will be known as
						trivial.
					</p>
					<p>
						This manual has been written with the intention to make it as
						comprehensive and simple as possible so that a larger audience can
						gain from it and not just the mathematically gifted. Hopefully by
						the end of this volume, the reader will have a greater understanding
						of many topics within science.
					</p>
					<p>
						This guide has been designed to make you think, rather than blindly
						copying out the same formula for every problem. This is with the
						intent for the reader to really understand the mathematics.
					</p>
					<p>
						It is recommended that you have taken A-level Further Maths before
						you read the text so that you get the most out of it.
					</p>
				</div>
				<div class="overview-right">
					<embed
						src="resources/img/Preview.pdf"
						type="application/pdf"
						width="100%"
						height="600px"
					/>
				</div>
			</div>

			<div class="checkout-main section">
				<section class="container">
					<div>
						<h4>Purchase the book</h4>
						<div class="pasha-image">
							<img
								src="resources/img/frontpagess.png"
								width="140"
								height="160"
							/>
						</div>
					</div>

					<button id="basic-photo-button">
						Buy for Â£<span id="total">10</span>.00
					</button>
					<div class="quantity-setter">
						<button class="increment-btn" id="subtract" disabled>
							-
						</button>
						<input type="number" id="quantity-input" min="1" value="1" />
						<button class="increment-btn" id="add">+</button>
					</div>
				</section>
				<div id="error-message"></div>
			</div>
		</div>

		<script>
			// Replace with your own publishable key: https://dashboard.stripe.com/test/apikeys
			var PUBLISHABLE_KEY = "pk_test_aLiapwQsHeWhJayF7w9grPQX00psxzlngH";
			// Replace with the domain you want your users to be redirected back to after payment
			var DOMAIN = window.location.origin;
			// Replace with a Price for your own product (created either in the Stripe Dashboard or with the API)
			// You can also supply a SKU or Plan ID for
			var PRICE_ID = "price_1HFOwRC26zNq2WicTVJc7HXK";

			var MIN_PHOTOS = 1;
			var MAX_PHOTOS = 10;

			var stripe = Stripe(PUBLISHABLE_KEY);

			var basicPhotoButton = document.getElementById("basic-photo-button");
			document
				.getElementById("quantity-input")
				.addEventListener("change", function (evt) {
					// Ensure customers only buy between 1 and 10 photos
					if (evt.target.value < MIN_PHOTOS) {
						evt.target.value = MIN_PHOTOS;
					}
					if (evt.target.value > MAX_PHOTOS) {
						evt.target.value = MAX_PHOTOS;
					}
				});

			var updateQuantity = function (evt) {
				if (evt && evt.type === "keypress" && evt.keyCode !== 13) {
					return;
				}

				var isAdding = evt.target.id === "add";
				var inputEl = document.getElementById("quantity-input");
				var currentQuantity = parseInt(inputEl.value);

				document.getElementById("add").disabled = false;
				document.getElementById("subtract").disabled = false;

				var quantity = isAdding ? currentQuantity + 1 : currentQuantity - 1;

				inputEl.value = quantity;
				document.getElementById("total").textContent = quantity * 5;

				// Disable the button if the customers hits the max or min
				if (quantity === MIN_PHOTOS) {
					document.getElementById("subtract").disabled = true;
				}
				if (quantity === MAX_PHOTOS) {
					document.getElementById("add").disabled = true;
				}
			};

			Array.from(document.getElementsByClassName("increment-btn")).forEach(
				(element) => {
					element.addEventListener("click", updateQuantity);
				}
			);

			// Handle any errors from Checkout
			var handleResult = function (result) {
				if (result.error) {
					var displayError = document.getElementById("error-message");
					displayError.textContent = result.error.message;
				}
			};

			basicPhotoButton.addEventListener("click", function () {
				var quantity = parseInt(
					document.getElementById("quantity-input").value
				);

				// Make the call to Stripe.js to redirect to the checkout page
				// with the current quantity
				stripe
					.redirectToCheckout({
						mode: "payment",
						lineItems: [{ price: PRICE_ID, quantity: quantity }],
						successUrl:
							DOMAIN + "/success.html?session_id={CHECKOUT_SESSION_ID}",
						cancelUrl: DOMAIN + "/canceled.html",
					})
					.then(handleResult);
			});
		</script>
	</body>
</html>
